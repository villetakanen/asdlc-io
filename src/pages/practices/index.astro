---
import { getCollection } from "astro:content";
import SpecCard from "../../components/SpecCard.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";

const practices = await getCollection("practices");
const sortedPractices = practices.sort(
  (a, b) => b.data.lastUpdated.getTime() - a.data.lastUpdated.getTime(),
);
---

<BaseLayout title="Practices" description="Practical implementation guides, specifications, and step-by-step tutorials for adopting ASDLC workflows.">
  <section>
    <h1>Practices & Implementation Guides</h1>

    <div class="spec-grid">
      {sortedPractices.map((practice) => (
        <SpecCard
          title={practice.data.title}
          url={`/practices/${practice.id}`}
          meta={`${practice.data.lastUpdated.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}`}
          tags={practice.data.tags || []}
        />
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  h1 {
    margin-bottom: 2rem;
  }

  .spec-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--s-gap);
  }
</style>
