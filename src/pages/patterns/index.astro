---
import { getCollection } from "astro:content";
import SpecCard from "../../components/SpecCard.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";

const patterns = await getCollection("patterns");
const sortedPatterns = patterns.sort(
  (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime(),
);
---

<BaseLayout title="Patterns" description="Architectural patterns in the ASDLC Knowledge Base">
  <section>
    <h1>Architectural Patterns</h1>

    <div class="spec-grid">
      {sortedPatterns.map((pattern) => (
        <SpecCard
          title={pattern.data.title}
          url={`/patterns/${pattern.id}`}
          meta={`${pattern.data.complexity} | ${pattern.data.status} | ${pattern.data.publishDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}`}
          tags={[pattern.data.complexity, pattern.data.status]}
        />
      ))}
    </div>
  </section>
</BaseLayout>

<style>
  h1 {
    margin-bottom: 2rem;
  }

  .spec-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--s-gap);
  }
</style>
